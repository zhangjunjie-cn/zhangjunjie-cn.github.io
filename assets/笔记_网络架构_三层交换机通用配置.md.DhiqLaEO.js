import{_ as e}from"./chunks/WDocTitleMeta.CWomXBKk.js";import{_ as t,C as F,c as r,o as l,j as p,G as d,aX as g,a as y,w as C,b as c,e as B}from"./chunks/framework.CH2nfyIq.js";import"./chunks/theme.BUkFuS7m.js";const _=JSON.parse('{"title":"三层交换机通用配置","description":"三层交换机通用配置","frontmatter":{"title":"三层交换机通用配置","description":"三层交换机通用配置","firstCommit":"2025-11-16 15:53","lastUpdated":"2025-11-16 15:53","tags":["network"]},"headers":[],"relativePath":"笔记/网络架构/三层交换机通用配置.md","filePath":"笔记/网络架构/三层交换机通用配置.md","lastUpdated":1766899374000}'),b={name:"笔记/网络架构/三层交换机通用配置.md"};function E(i,s,o,u,m,A){const h=e,k=F("ClientOnly");return l(),r("div",null,[s[0]||(s[0]=p("h1",{id:"三层交换机通用配置",tabindex:"-1"},[y("三层交换机通用配置 "),p("a",{class:"header-anchor",href:"#三层交换机通用配置","aria-label":'Permalink to "三层交换机通用配置"'},"​")],-1)),d(k,null,{default:C(()=>{var a,n;return[(((a=i.$frontmatter)==null?void 0:a.aside)??!0)&&(((n=i.$frontmatter)==null?void 0:n.showWDocTitleMeta)??!0)?(l(),c(h,{key:0,article:i.$frontmatter},null,8,["article"])):B("",!0)]}),_:1}),s[1]||(s[1]=g(`<p>非常好！您提到了两个关键点：<strong>行业规范配置</strong>和<strong>远程SSH管理</strong>。这些正是将“能通”的网络升级为“稳定、安全、易运维”的网络所必须的。</p><p>下面，我将严格按照行业通用规范，为您完善之前“貌似没有配置”的隐藏项，并包含远程SSH的最佳实践。</p><p>我们将从<strong>核心交换机</strong>开始，因为它是最关键的设备。</p><hr><h3 id="核心交换机-完整规范化配置示例-以华为-华三cli风格为例" tabindex="-1">核心交换机 - 完整规范化配置示例 (以华为/华三CLI风格为例) <a class="header-anchor" href="#核心交换机-完整规范化配置示例-以华为-华三cli风格为例" aria-label="Permalink to &quot;核心交换机 - 完整规范化配置示例 (以华为/华三CLI风格为例)&quot;">​</a></h3><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 进入系统视图</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">system-view</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 设置设备主机名，便于管理（规范：使用位置-角色-型号等约定）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Core-Switch-01</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置Loopback接口</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 最关键的规范化配置之一</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 用途：作为OSPF/BGP的Router-ID、作为SNMP/SSH等管理的源地址、提供永久的逻辑地址。</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> LoopBack</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10.0.0.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.255</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 通常使用32位掩码</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Management-loopback</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置SSH远程登录</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 禁用不安全的Telnet</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 首先创建用于管理的本地用户</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cipher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> YourStrongPassword123!</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cipher表示密码加密存储</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> privilege</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 权限等级15为最高</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 该用户只能用于SSH服务</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 生成RSA密钥对，这是SSH连接的基础</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">rsa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> local-key-pair</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> create</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 启用SSH服务并配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stelnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> authentication-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stelnet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">line</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vty</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置虚拟终端线路</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> authentication-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aaa</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">              !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 使用AAA认证</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inbound</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 只允许SSH接入，禁止Telnet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> user-role</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> network-admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 用户角色为网络管理员</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> idle-timeout</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                     !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 设置空闲超时20分钟，增强安全</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置SNMP用于网管系统监控</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snmp-agent</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snmp-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sys-info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> version</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> v2c</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">       !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 根据网管系统支持选择v2c或v3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snmp-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> community</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> read</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> public</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 设置只读团体字，生产环境应更复杂</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snmp-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> community</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> write</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> private</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 设置读写团体字，生产环境应更复杂</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snmp-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sys-info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> contact</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> netadmin@company.com</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">snmp-agent</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> sys-info</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> location</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Core-Room-Rack-01&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置NTP时间同步</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 所有设备时间一致是排查故障的基础</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ntp-service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ntp-service</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> unicast-server</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指向公司内网的NTP服务器或互联网NTP服务器</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 5.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 创建VLAN并描述</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vlan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Wired-User-Network</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">      !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 清晰的描述至关重要</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Wireless-User-Network</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 6.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置上行链路和下行链路（以G1/0/1下行至汇聚为例）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Link-To-Agg-Switch-01-G1/0/48</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 链路描述，必须规范！</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow-pass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">     !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 精确允许所需的VLAN，而不是ALL</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> undo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> negotiation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auto</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 强制速率和双工模式，避免自协商问题</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> speed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> duplex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> full</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 7.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置VLAN接口（网关）并开启防伪冒IP功能</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlanif</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.10.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Gateway-for-VLAN10-Wired</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mac-address</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> learning</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> strict</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">          !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 开启严格MAC地址学习，增强安全</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> arp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> anti-attack</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> check</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user-bind</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 可结合IP-MAC绑定表防ARP欺骗</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlanif</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.20.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Gateway-for-VLAN20-Wireless</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 8.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置默认路由指向防火墙</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route-static</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> To-Firewall</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 9.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (可选但推荐) 开启日志并发送到日志服务器</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info-center</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">info-center</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> loghost</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.100.10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">    !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 日志服务器地址</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 10.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 保存配置</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !!!</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 最重要的一步</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !!!</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> force</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br></div></div><hr><h3 id="汇聚-接入交换机-关键规范化配置" tabindex="-1">汇聚/接入交换机 - 关键规范化配置 <a class="header-anchor" href="#汇聚-接入交换机-关键规范化配置" aria-label="Permalink to &quot;汇聚/接入交换机 - 关键规范化配置&quot;">​</a></h3><p>汇聚/接入层的配置与核心类似，但更侧重于二层安全和接入控制。</p><div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">system-view</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Access-Switch-01-Floor-1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 1.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 环路防护</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 接入层的生命线</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                           !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 全局开启生成树协议</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> rstp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                        !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 配置为快速生成树RSTP或MSTP</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> bpdu-protection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 开启BPDU保护，防止非法接入交换机</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> root-protection</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 在上联口可配置根保护</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 2.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 端口安全</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> -</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 控制终端接入</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Connect-to-PC-UserA</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> access</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> edged-port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">               !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 将该端口设置为边缘端口，快速进入转发状态</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> bpdu-filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                  !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 边缘端口可开启BPDU过滤</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> storm-control</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> broadcast</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> min-ratio</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 开启广播风暴抑制</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> mac-limit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> maximum</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                 !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 限制该端口最多学习5个MAC地址，防私接Hub/AP</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 3.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 下行端口默认配置为关闭，需要时再开启（安全最佳实践）</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> range</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/0/1</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> to</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/0/48</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> shutdown</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                            !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 初始状态下所有端口关闭</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UNUSED-PORT</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">             !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 未使用端口打上标签</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 当确认某端口需要使用时，再进入该端口执行：</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> undo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> shutdown</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> access/trunk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ...</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (其他配置)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> 4.</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 上联端口配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 1/0/48</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> description</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> UPLINK-To-Core-Switch-G1/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow-pass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> undo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> negotiation</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> auto</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> speed</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> duplex</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> full</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> disable</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">                         !</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 上联至核心，若确信无环路可关闭STP以提升性能</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><hr><h3 id="总结-行业规范的核心思想" tabindex="-1">总结：行业规范的核心思想 <a class="header-anchor" href="#总结-行业规范的核心思想" aria-label="Permalink to &quot;总结：行业规范的核心思想&quot;">​</a></h3><ol><li><strong>描述清晰</strong>：每一条链路、每一个VLAN、每一个接口都要有清晰的<code>description</code>。</li><li><strong>安全最小化原则</strong>：按需放通VLAN，关闭未用端口，配置端口安全。</li><li><strong>可管理性</strong>：配置SSH、SNMP、NTP、Logging，让网络“可见、可控、可管理”。</li><li><strong>可靠性</strong>：部署STP，强制速率/双工，避免自协商带来的不稳定。</li><li><strong>标准化</strong>：所有同类设备配置风格、命名约定、IP地址规划保持一致。</li></ol><p><strong>关于远程SSH</strong>：它绝对是行业标准和管理员的“生命线”。通过上述配置，您就可以从网络的任何位置，使用 <code>ssh admin@10.0.0.1</code>（通过Loopback地址）或 <code>ssh admin@192.168.10.1</code> 安全地登录到核心交换机进行管理，彻底告别不安全的Telnet和console线缆的物理限制。</p><p>这套配置模板是一个生产级网络的坚实基础，您可以根据实际设备和需求进行微调。</p>`,15))])}const P=t(b,[["render",E]]);export{_ as __pageData,P as default};
