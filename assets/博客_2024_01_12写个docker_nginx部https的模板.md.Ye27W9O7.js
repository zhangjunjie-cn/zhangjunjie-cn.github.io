import{_ as r}from"./chunks/WDocTitleMeta.CBqvO_nj.js";import{_ as d,C as p,c as h,o as t,j as n,G as c,aU as k,a as g,w as u,b as m,e as b}from"./chunks/framework.DBcUES_J.js";import"./chunks/theme.CS7z9qWM.js";const A=JSON.parse('{"title":"å†™ä¸ªdocker+nginxéƒ¨httpsçš„æ¨¡æ¿","description":"","frontmatter":{},"headers":[],"relativePath":"åšå®¢/2024/01/12å†™ä¸ªdocker+nginxéƒ¨httpsçš„æ¨¡æ¿.md","filePath":"åšå®¢/2024/01/12å†™ä¸ªdocker+nginxéƒ¨httpsçš„æ¨¡æ¿.md","lastUpdated":1760196138000}'),F={name:"åšå®¢/2024/01/12å†™ä¸ªdocker+nginxéƒ¨httpsçš„æ¨¡æ¿.md"};function _(s,e,y,f,E,B){const l=r,o=p("ClientOnly");return t(),h("div",null,[e[0]||(e[0]=n("h1",{id:"å†™ä¸ªdocker-nginxéƒ¨httpsçš„æ¨¡æ¿",tabindex:"-1"},[g("å†™ä¸ªdocker+nginxéƒ¨httpsçš„æ¨¡æ¿ "),n("a",{class:"header-anchor",href:"#å†™ä¸ªdocker-nginxéƒ¨httpsçš„æ¨¡æ¿","aria-label":'Permalink to "å†™ä¸ªdocker+nginxéƒ¨httpsçš„æ¨¡æ¿"'},"â€‹")],-1)),c(o,null,{default:u(()=>{var i,a;return[(((i=s.$frontmatter)==null?void 0:i.aside)??!0)&&(((a=s.$frontmatter)==null?void 0:a.showWDocTitleMeta)??!0)?(t(),m(l,{key:0,article:s.$frontmatter},null,8,["article"])):b("",!0)]}),_:1}),e[1]||(e[1]=k(`<p>å°é¢ï¼š</p><p><img src="https://oss.justin3go.com/blogs/%E6%88%91%E5%86%99%E4%BA%86%E4%B8%80%E4%B8%AAnginx%E9%83%A8%E7%BD%B2https%E7%9A%84%E6%95%99%E7%A8%8B%E5%8D%9A%E5%AE%A2%EF%BC%8C%E8%AF%B7%E4%B8%BA%E6%88%91%E7%94%9F%E6%88%90%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E5%B0%81%E9%9D%A2%E5%9B%BE_0.png" alt="" loading="lazy"></p><h2 id="èƒŒæ™¯" tabindex="-1">èƒŒæ™¯ <a class="header-anchor" href="#èƒŒæ™¯" aria-label="Permalink to &quot;èƒŒæ™¯&quot;">â€‹</a></h2><p>æœ‰æ—¶å€™æƒ³éƒ¨ç½²ä¸€ä¸ªç»™å›½å†…æœ‹å‹ä½¿ç”¨çš„å°ç½‘ç«™ï¼Œä½†æ˜¯å›½å†…åˆæ²¡æœ‰åƒå›½å¤–é‚£äº›å…è´¹å¥½ç”¨çš„éƒ¨ç½²å¹³å°ï¼Œæ‰€ä»¥å°±åªèƒ½è‡ªå·±æ­å»ºï¼Œè‡ªå·±æ­å»ºåˆæ¯æ¬¡é¿å¼€ä¸äº†nginxåä»£å®ç°httpsè¿™ä¸€æ­¥ï¼Œæ‰€ä»¥å°±ç®€å•å†™äº†ä¸ªæ¨¡æ¿ä»¥åŠshellè„šæœ¬ï¼Œæ–¹ä¾¿è‡ªå·±æ¯æ¬¡å¿«é€Ÿéƒ¨ç½²ã€‚</p><h2 id="ç®€ä»‹" tabindex="-1">ç®€ä»‹ <a class="header-anchor" href="#ç®€ä»‹" aria-label="Permalink to &quot;ç®€ä»‹&quot;">â€‹</a></h2><p><a href="https://github.com/Justin3go/nginx-https-template" target="_blank" rel="noreferrer">æ¨¡æ¿åœ°å€</a>ï¼Œä¸€ä¸ªåŸºäº<code>nginx + docker</code>çš„<code>https</code>æ¨¡æ¿ï¼Œå¯ä»¥å¿«é€Ÿéƒ¨ç½²<code>https</code>ç½‘ç«™ğŸš€ğŸš€ğŸš€</p><blockquote><p>ä½ è‡³å°‘å¹¶ä¸”ä¹Ÿåªéœ€è¦æ‹¥æœ‰dockerç¯å¢ƒï¼Œ<a href="https://zhuanlan.zhihu.com/p/143156163" target="_blank" rel="noreferrer"># å¦‚ä½•åœ¨ Ubuntu 20.04 ä¸Šå®‰è£…å’Œä½¿ç”¨ Docker</a></p></blockquote><p>åŸºæœ¬æµç¨‹ï¼š</p><p><img src="https://oss.justin3go.com/blogs/nginx_https.png" alt="" loading="lazy"></p><h2 id="ä½¿ç”¨è¯¥æ¨¡æ¿" tabindex="-1">ä½¿ç”¨è¯¥æ¨¡æ¿ <a class="header-anchor" href="#ä½¿ç”¨è¯¥æ¨¡æ¿" aria-label="Permalink to &quot;ä½¿ç”¨è¯¥æ¨¡æ¿&quot;">â€‹</a></h2><ol><li>è¿›å…¥ä½ çš„<code>repos</code>ç›®å½•ï¼Œå¯ä»¥ä¸ºä»»æ„ç›®å½•ï¼ˆä¸è¿‡åç»­å¯èƒ½è¦ç¨åšä¿®æ”¹ï¼‰ï¼Œè¿™é‡Œä»¥<code>/root/repos/</code>ä¸ºä¾‹ï¼Œå¦‚æœæ²¡æœ‰<code>repos</code>ç›®å½•ï¼Œå¯ä»¥åˆ›å»ºä¸€ä¸ªã€‚ç„¶å<code>clone</code>æœ¬é¡¹ç›®</li></ol><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /root/repos/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">git</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clone</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://github.com/Justin3go/nginx-https-template.git</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">cd</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> nginx-https-template</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ol start="2"><li><p>æ›¿æ¢<code>cert/</code>ä¸‹çš„è¯ä¹¦ä¸ºä½ çš„è¯ä¹¦ï¼Œæ ¼å¼ä¸º<code>your-domain.key</code>å’Œ<code>your-domain.pem</code>ï¼Œæ¯”å¦‚æˆ‘çš„åŸŸåæ˜¯<code>justin3go.com</code>ï¼Œé‚£ä¹ˆæˆ‘çš„è¯ä¹¦å°±æ˜¯<code>justin3go.com.key</code>å’Œ<code>justin3go.com.pem</code></p></li><li><p>è¿è¡Œè„šæœ¬<code>./scripts/replace-domain.sh --domain=your-domain</code></p></li></ol><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sudo</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> chmod</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -R</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ./scripts</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è®¾ç½®è„šæœ¬æƒé™</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/replace-domain.sh</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --domain=your-domain</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # è¿è¡Œè„šæœ¬æ›¿æ¢åŸŸå</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><blockquote><p>æ³¨æ„ï¼šé»˜è®¤<code>https</code>è½¬å‘çš„æ˜¯<code>80</code>ç«¯å£ï¼Œå¦‚æœä½ çš„ç½‘ç«™ä¸æ˜¯<code>80</code>ç«¯å£ï¼Œéœ€è¦ä¿®æ”¹<code>/conf.d/default.conf</code>ä¸­çš„<code>proxy_pass</code>ä¸ºä½ çš„ç«¯å£</p></blockquote><ol start="4"><li><p>å¦‚æœåœ¨ç¬¬ä¸€æ­¥ä¸­ä½ ä½¿ç”¨çš„è‡ªå®šä¹‰ç›®å½•ï¼Œåˆ™ä¿®æ”¹<code>docker-compose.yml</code>ä¸­çš„æ ¹ç›®å½•ä¸ºä½ çš„ç›®å½•ï¼Œé»˜è®¤ä¸º<code>/root/repos/</code></p></li><li><p>å¯åŠ¨å®¹å™¨</p></li></ol><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="å¤åˆ¶ä»£ç " class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">./scripts/run.sh</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="æ¥ä¸‹æ¥" tabindex="-1">æ¥ä¸‹æ¥ <a class="header-anchor" href="#æ¥ä¸‹æ¥" aria-label="Permalink to &quot;æ¥ä¸‹æ¥&quot;">â€‹</a></h2><ul><li>ä½ å¯ä»¥ä½¿ç”¨<code>docker ps</code>å‘½ä»¤æŸ¥çœ‹å®¹å™¨æ˜¯å¦æ­£å¸¸è¿è¡Œ</li><li>ä»¥åŠä½¿ç”¨<code>tail -n 1000 logs/access.log</code>å’Œ<code>tail -n 1000 logs/error.log</code>æŸ¥çœ‹<code>nginx</code>è¿è¡Œæ—¥å¿—</li></ul>`,20))])}const D=d(F,[["render",_]]);export{A as __pageData,D as default};
