import{_ as p}from"./chunks/WDocTitleMeta.BmZDjHCj.js";import{_ as r,C as k,c as d,o as n,j as l,G as g,aU as o,a as c,w as F,b as u,e as b}from"./chunks/framework.UOXOyoov.js";import"./chunks/theme.BUm-IbPM.js";const q=JSON.parse('{"title":"交换机初始化教程","description":"新到手的华为交换机需要进行一系列基础配置，以确保其能够正常工作并满足网络需求。以下是常见的配置步骤和注意事项：","frontmatter":{"lastUpdated":"2025-11-09 21:59:26+8:00","firstCommit":"2025/03/18 10:44","title":"交换机初始化教程","description":"新到手的华为交换机需要进行一系列基础配置，以确保其能够正常工作并满足网络需求。以下是常见的配置步骤和注意事项：","tags":["交换机"]},"headers":[],"relativePath":"博客/2025/03/交换机初始化教程.md","filePath":"博客/2025/03/交换机初始化教程.md","lastUpdated":1762696766000}'),m={name:"博客/2025/03/交换机初始化教程.md"};function y(i,s,C,v,B,f){const t=p,h=k("ClientOnly");return n(),d("div",null,[s[0]||(s[0]=l("h1",{id:"交换机初始化教程",tabindex:"-1"},[c("交换机初始化教程 "),l("a",{class:"header-anchor",href:"#交换机初始化教程","aria-label":'Permalink to "交换机初始化教程"'},"​")],-1)),g(h,null,{default:F(()=>{var a,e;return[(((a=i.$frontmatter)==null?void 0:a.aside)??!0)&&(((e=i.$frontmatter)==null?void 0:e.showWDocTitleMeta)??!0)?(n(),u(t,{key:0,article:i.$frontmatter},null,8,["article"])):b("",!0)]}),_:1}),s[1]||(s[1]=o(`<p>新到手的华为交换机需要进行一系列基础配置，以确保其能够正常工作并满足网络需求。以下是常见的配置步骤和注意事项：</p><hr><h3 id="_1-基础配置" tabindex="-1"><strong>1. 基础配置</strong> <a class="header-anchor" href="#_1-基础配置" aria-label="Permalink to &quot;**1. 基础配置**&quot;">​</a></h3><h4 id="_1-1-设置设备名称" tabindex="-1"><strong>1.1 设置设备名称</strong> <a class="header-anchor" href="#_1-1-设置设备名称" aria-label="Permalink to &quot;**1.1 设置设备名称**&quot;">​</a></h4><ul><li>为交换机设置一个易于识别的名称。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">sysname</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> SW1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_1-2-配置管理-ip" tabindex="-1"><strong>1.2 配置管理 IP</strong> <a class="header-anchor" href="#_1-2-配置管理-ip" aria-label="Permalink to &quot;**1.2 配置管理 IP**&quot;">​</a></h4><ul><li>为交换机配置管理 IP，方便远程管理。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlanif1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> address</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.1</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><h4 id="_1-3-配置默认网关" tabindex="-1"><strong>1.3 配置默认网关</strong> <a class="header-anchor" href="#_1-3-配置默认网关" aria-label="Permalink to &quot;**1.3 配置默认网关**&quot;">​</a></h4><ul><li>如果交换机需要与其他网络通信，需配置默认网关。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> route-static</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.1.254</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_1-4-配置-telnet-ssh-远程登录" tabindex="-1"><strong>1.4 配置 Telnet/SSH 远程登录</strong> <a class="header-anchor" href="#_1-4-配置-telnet-ssh-远程登录" aria-label="Permalink to &quot;**1.4 配置 Telnet/SSH 远程登录**&quot;">​</a></h4><ul><li>启用 Telnet 或 SSH 服务，并配置登录用户。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user-interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vty</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  authentication-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  protocol</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inbound</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cipher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Admin@123</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ssh</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> privilege</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> authentication-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ssh</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stelnet</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stelnet</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> server</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></li></ul><hr><h3 id="_2-vlan-配置" tabindex="-1"><strong>2. VLAN 配置</strong> <a class="header-anchor" href="#_2-vlan-配置" aria-label="Permalink to &quot;**2. VLAN 配置**&quot;">​</a></h3><h4 id="_2-1-创建-vlan" tabindex="-1"><strong>2.1 创建 VLAN</strong> <a class="header-anchor" href="#_2-1-创建-vlan" aria-label="Permalink to &quot;**2.1 创建 VLAN**&quot;">​</a></h4><ul><li>根据网络规划创建 VLAN。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">vlan</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> batch</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_2-2-配置接口-vlan" tabindex="-1"><strong>2.2 配置接口 VLAN</strong> <a class="header-anchor" href="#_2-2-配置接口-vlan" aria-label="Permalink to &quot;**2.2 配置接口 VLAN**&quot;">​</a></h4><ul><li>将接口划分到对应的 VLAN。 <ul><li>Access 模式：<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet0/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> access</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> default</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li><li>Trunk 模式：<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet0/0/2</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow-pass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul></li></ul><hr><h3 id="_3-生成树协议-stp-配置" tabindex="-1"><strong>3. 生成树协议（STP）配置</strong> <a class="header-anchor" href="#_3-生成树协议-stp-配置" aria-label="Permalink to &quot;**3. 生成树协议（STP）配置**&quot;">​</a></h3><ul><li>启用 STP 防止环路。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">stp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stp</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  # 可选模式：stp/rstp/mstp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul><hr><h3 id="_4-dhcp-配置" tabindex="-1"><strong>4. DHCP 配置</strong> <a class="header-anchor" href="#_4-dhcp-配置" aria-label="Permalink to &quot;**4. DHCP 配置**&quot;">​</a></h3><h4 id="_4-1-启用-dhcp-服务" tabindex="-1"><strong>4.1 启用 DHCP 服务</strong> <a class="header-anchor" href="#_4-1-启用-dhcp-服务" aria-label="Permalink to &quot;**4.1 启用 DHCP 服务**&quot;">​</a></h4><ul><li>如果交换机需要分配 IP 地址，需启用 DHCP 服务。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">dhcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><h4 id="_4-2-配置-dhcp-地址池" tabindex="-1"><strong>4.2 配置 DHCP 地址池</strong> <a class="header-anchor" href="#_4-2-配置-dhcp-地址池" aria-label="Permalink to &quot;**4.2 配置 DHCP 地址池**&quot;">​</a></h4><ul><li>为 VLAN 配置 DHCP 地址池。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> pool</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  network</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.10.0</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> mask</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 255.255.255.0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  gateway-list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.10.1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dns-list</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 8.8.8.8</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Vlanif10</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  dhcp</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> select</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> global</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ul><hr><h3 id="_5-链路聚合-eth-trunk-配置" tabindex="-1"><strong>5. 链路聚合（Eth-Trunk）配置</strong> <a class="header-anchor" href="#_5-链路聚合-eth-trunk-配置" aria-label="Permalink to &quot;**5. 链路聚合（Eth-Trunk）配置**&quot;">​</a></h3><ul><li>将多个物理接口绑定为逻辑接口，提高带宽和可靠性。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> Eth-Trunk1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> link-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> trunk</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> allow-pass</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 20</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 30</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet0/0/3</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  eth-trunk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet0/0/4</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  eth-trunk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li></ul><hr><h3 id="_6-安全配置" tabindex="-1"><strong>6. 安全配置</strong> <a class="header-anchor" href="#_6-安全配置" aria-label="Permalink to &quot;**6. 安全配置**&quot;">​</a></h3><h4 id="_6-1-配置-acl" tabindex="-1"><strong>6.1 配置 ACL</strong> <a class="header-anchor" href="#_6-1-配置-acl" aria-label="Permalink to &quot;**6.1 配置 ACL**&quot;">​</a></h4><ul><li>限制特定流量。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">acl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rule</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> permit</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> source</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.10.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.255</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> destination</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 192.168.20.0</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.0.0.255</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  rule</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 10</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> deny</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet0/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  traffic-filter</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> inbound</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> acl</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 3000</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul><h4 id="_6-2-配置端口安全" tabindex="-1"><strong>6.2 配置端口安全</strong> <a class="header-anchor" href="#_6-2-配置端口安全" aria-label="Permalink to &quot;**6.2 配置端口安全**&quot;">​</a></h4><ul><li>限制接口连接的设备数量。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> GigabitEthernet0/0/1</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port-security</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  port-security</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> max-mac-num</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 5</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li></ul><hr><h3 id="_7-保存配置" tabindex="-1"><strong>7. 保存配置</strong> <a class="header-anchor" href="#_7-保存配置" aria-label="Permalink to &quot;**7. 保存配置**&quot;">​</a></h3><ul><li>配置完成后，务必保存配置。<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul><hr><h3 id="_8-验证配置" tabindex="-1"><strong>8. 验证配置</strong> <a class="header-anchor" href="#_8-验证配置" aria-label="Permalink to &quot;**8. 验证配置**&quot;">​</a></h3><ul><li>使用以下命令检查配置是否生效： <ul><li>查看接口状态：<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> brief</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>查看 VLAN 信息：<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> vlan</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>查看路由表：<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> ip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> routing-table</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li>查看 STP 状态：<div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">display</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> stp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ul></li></ul><hr><h3 id="_9-其他注意事项" tabindex="-1"><strong>9. 其他注意事项</strong> <a class="header-anchor" href="#_9-其他注意事项" aria-label="Permalink to &quot;**9. 其他注意事项**&quot;">​</a></h3><ul><li><strong>固件升级</strong>：检查交换机固件版本，必要时升级到最新版本。</li><li><strong>日志配置</strong>：配置日志服务器，便于故障排查。</li><li><strong>备份配置</strong>：定期备份交换机配置。</li></ul><hr><h3 id="总结" tabindex="-1"><strong>总结</strong> <a class="header-anchor" href="#总结" aria-label="Permalink to &quot;**总结**&quot;">​</a></h3><p>新到手的华为交换机需要完成以下基础配置：</p><ol><li>设备名称、管理 IP、默认网关。</li><li>VLAN 划分和接口配置。</li><li>STP、DHCP、链路聚合等高级功能。</li><li>安全配置（ACL、端口安全）。</li><li>保存配置并验证。</li></ol><h3 id="其他配置项" tabindex="-1">其他配置项 <a class="header-anchor" href="#其他配置项" aria-label="Permalink to &quot;其他配置项&quot;">​</a></h3><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">HUAWEI</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> system-view</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[HUAWEI] user-interface console 0    //进入Console用户界面</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[HUAWEI-console0] authentication-mode aaa    //配置认证方式为AAA</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">[HUAWEI-console0] quit</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>这段配置的作用是 <strong>将 Console 口的认证方式改为 AAA 认证</strong>。以下是详细解释和是否需要配置的建议：</p><hr><h3 id="_1-配置解析" tabindex="-1"><strong>1. 配置解析</strong> <a class="header-anchor" href="#_1-配置解析" aria-label="Permalink to &quot;**1. 配置解析**&quot;">​</a></h3><ul><li><p><strong><code>user-interface console 0</code></strong>：</p><ul><li>进入 Console 口的用户界面配置模式。</li><li><code>console 0</code> 表示第一个 Console 口（通常交换机只有一个 Console 口）。</li></ul></li><li><p><strong><code>authentication-mode aaa</code></strong>：</p><ul><li>将 Console 口的认证方式设置为 AAA 认证。</li><li>启用后，通过 Console 口登录时需要输入用户名和密码。</li></ul></li><li><p><strong><code>quit</code></strong>：</p><ul><li>退出当前配置模式。</li></ul></li></ul><hr><h3 id="_2-配置的必要性" tabindex="-1"><strong>2. 配置的必要性</strong> <a class="header-anchor" href="#_2-配置的必要性" aria-label="Permalink to &quot;**2. 配置的必要性**&quot;">​</a></h3><p>是否需要配置 <code>authentication-mode aaa</code>，取决于你的安全需求和网络环境：</p><h4 id="_2-1-需要配置的场景" tabindex="-1"><strong>2.1 需要配置的场景</strong> <a class="header-anchor" href="#_2-1-需要配置的场景" aria-label="Permalink to &quot;**2.1 需要配置的场景**&quot;">​</a></h4><ul><li><strong>高安全性要求</strong>： <ul><li>如果交换机部署在公共环境或需要高安全性，建议启用 AAA 认证，防止未授权用户通过 Console 口访问设备。</li></ul></li><li><strong>统一认证管理</strong>： <ul><li>如果网络中已部署 AAA 服务器（如 RADIUS 或 TACACS+），可以通过 AAA 认证统一管理用户权限。</li></ul></li></ul><h4 id="_2-2-不需要配置的场景" tabindex="-1"><strong>2.2 不需要配置的场景</strong> <a class="header-anchor" href="#_2-2-不需要配置的场景" aria-label="Permalink to &quot;**2.2 不需要配置的场景**&quot;">​</a></h4><ul><li><strong>低安全性要求</strong>： <ul><li>如果交换机部署在受控环境（如机房），且只有授权人员可以物理接触设备，可以不启用 AAA 认证。</li></ul></li><li><strong>简化管理</strong>： <ul><li>如果希望简化管理，可以直接使用密码认证（<code>authentication-mode password</code>）。</li></ul></li></ul><hr><h3 id="_3-配置示例" tabindex="-1"><strong>3. 配置示例</strong> <a class="header-anchor" href="#_3-配置示例" aria-label="Permalink to &quot;**3. 配置示例**&quot;">​</a></h3><h4 id="_3-1-启用-aaa-认证" tabindex="-1"><strong>3.1 启用 AAA 认证</strong> <a class="header-anchor" href="#_3-1-启用-aaa-认证" aria-label="Permalink to &quot;**3.1 启用 AAA 认证**&quot;">​</a></h4><ol><li><p>配置 Console 口认证方式为 AAA：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user-interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  authentication-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> aaa</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>配置本地用户和密码：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">aaa</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cipher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NewPassword</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> service-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> terminal</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  local-user</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> admin</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> privilege</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> level</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 15</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li><li><p>保存配置：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><h4 id="_3-2-启用密码认证" tabindex="-1"><strong>3.2 启用密码认证</strong> <a class="header-anchor" href="#_3-2-启用密码认证" aria-label="Permalink to &quot;**3.2 启用密码认证**&quot;">​</a></h4><p>如果不需要 AAA 认证，可以直接配置密码：</p><ol><li><p>配置 Console 口认证方式为密码：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">user-interface</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> console</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">  authentication-mode</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li><li><p>设置密码：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> authentication</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> password</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> cipher</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> NewPassword</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li><li><p>保存配置：</p><div class="language-shell vp-adaptive-theme line-numbers-mode"><button title="复制代码" class="copy"></button><span class="lang">shell</span><pre class="shiki shiki-themes github-light github-dark vp-code" style="--shiki-light:#24292e;--shiki-dark:#e1e4e8;--shiki-light-bg:#fff;--shiki-dark-bg:#24292e;" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">save</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol><hr><h3 id="_4-注意事项" tabindex="-1"><strong>4. 注意事项</strong> <a class="header-anchor" href="#_4-注意事项" aria-label="Permalink to &quot;**4. 注意事项**&quot;">​</a></h3><ul><li><strong>备份配置</strong>：在修改认证方式前，备份当前配置，以防配置错误导致无法登录。</li><li><strong>测试登录</strong>：修改配置后，测试 Console 口登录是否正常。</li><li><strong>权限管理</strong>：确保配置的用户权限足够（如 <code>privilege level 15</code> 为最高权限）。</li></ul><hr><h3 id="总结-1" tabindex="-1"><strong>总结</strong> <a class="header-anchor" href="#总结-1" aria-label="Permalink to &quot;**总结**&quot;">​</a></h3><ul><li>这段配置的作用是将 Console 口的认证方式改为 AAA 认证。</li><li>是否需要配置取决于你的安全需求和管理复杂度。</li><li>如果启用 AAA 认证，需同时配置本地用户或远程认证服务器。</li></ul><p>如果你有其他问题，欢迎随时提问！</p>`,75))])}const x=r(m,[["render",y]]);export{q as __pageData,x as default};
