import{_ as u}from"./chunks/ArticleGPT.CIdplztc.js";import{_ as m}from"./chunks/ArticleMetadata.Bk35KApq.js";import{_ as D,P as l,z as E,A as e,B as i,b as a,G as n,O as h,am as C,Q as t,S as B,aH as d}from"./chunks/framework.CL4wpspn.js";import"./chunks/index.959-FHYj.js";import"./chunks/theme.DNHPCAJe.js";import"./chunks/dayjs.min.C5r3cYpF.js";const G=JSON.parse('{"title":"企业级网络架构分析","description":"","frontmatter":{"date":"2025/04/13 21:07:00","isTop":false,"title":"企业级网络架构分析","author":"张俊杰","articleGPT":"这是一篇关于","categories":["博客"],"tags":["交换机"]},"headers":[],"relativePath":"categories/annals/2025/04/13/企业级网络架构分析.md","filePath":"categories/annals/2025/04/13/企业级网络架构分析.md","lastUpdated":1744556240000}'),f={name:"categories/annals/2025/04/13/企业级网络架构分析.md"};function v(p,s,P,N,V,q){const c=m,g=l("ClientOnly"),A=l("NolebasePageProperties"),o=u,k=l("Mermaid"),y=l("NolebaseGitContributors"),b=l("NolebaseGitChangelog");return e(),E("div",null,[s[4]||(s[4]=i("h1",{id:"企业级网络架构分析",tabindex:"-1"},[a("企业级网络架构分析 "),i("a",{class:"header-anchor",href:"#企业级网络架构分析","aria-label":'Permalink to "企业级网络架构分析"'},"​")],-1)),s[5]||(s[5]=a()),n(g,null,{default:t(()=>{var r,F;return[(((r=p.$frontmatter)==null?void 0:r.aside)??!0)&&(((F=p.$frontmatter)==null?void 0:F.showArticleMetadata)??!0)?(e(),h(c,{key:0,article:p.$frontmatter},null,8,["article"])):B("",!0)]}),_:1}),n(A),n(o),s[6]||(s[6]=i("h2",{id:"企业级网络架构分析-1",tabindex:"-1"},[i("strong",null,"企业级网络架构分析"),a(),i("a",{class:"header-anchor",href:"#企业级网络架构分析-1","aria-label":'Permalink to "**企业级网络架构分析**"'},"​")],-1)),s[7]||(s[7]=a()),(e(),h(d,null,{default:t(()=>[n(k,{id:"mermaid-10",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20%25%25%20%E5%AE%9A%E4%B9%89%E6%A0%B7%E5%BC%8F%0A%20%20%20%20classDef%20access%20fill%3A%23D1C4E9%2Cstroke%3A%237E57C2%3B%0A%20%20%20%20classDef%20trunk%20fill%3A%23E1F5FE%2Cstroke%3A%23039BE5%3B%0A%20%20%20%20classDef%20core%20fill%3A%23FFECB3%2Cstroke%3A%23FFA000%3B%0A%20%20%20%20classDef%20router%20fill%3A%23C8E6C9%2Cstroke%3A%23388E3C%3B%0A%20%20%20%20classDef%20logical%20stroke-dasharray%3A5%2C5%2Cstroke%3A%23F44336%2Cfill%3A%23FFEBEE%3B%0A%0A%20%20%20%20%25%25%20%E7%89%A9%E7%90%86%E6%8B%93%E6%89%91%0A%20%20%20%20A1%5B%E6%8E%A5%E5%85%A5%E4%BA%A4%E6%8D%A2%E6%9C%BA1%3Cbr%2F%3EG0%2F0%2F1%3ATrunk%5D%3A%3A%3Atrunk%20--%20G0%2F0%2F1%20--%3E%20CORE%5B%E6%A0%B8%E5%BF%83%E4%BA%A4%E6%8D%A2%E6%9C%BA-HW-S7700%5D%3A%3A%3Acore%0A%20%20%20%20A2%5B%E6%8E%A5%E5%85%A5%E4%BA%A4%E6%8D%A2%E6%9C%BA2%3Cbr%2F%3EG0%2F0%2F1%3ATrunk%5D%3A%3A%3Atrunk%20--%20G0%2F0%2F2%20--%3E%20CORE%0A%20%20%20%20CORE%20--%20G0%2F0%2F24%20--%3E%20R%5B%E5%87%BA%E5%8F%A3%E8%B7%AF%E7%94%B1%E5%99%A8%5D%3A%3A%3Arouter%0A%0A%20%20%20%20%25%25%20%E7%BB%88%E7%AB%AF%E8%AE%BE%E5%A4%87%0A%20%20%20%20PC1%5BPC1%3Cbr%2F%3EVLAN10%5D%3A%3A%3Aaccess%20--%20Access%20VLAN10%20--%3E%20A1%0A%20%20%20%20CAM1%5B%E6%91%84%E5%83%8F%E5%A4%B41%3Cbr%2F%3EVLAN20%5D%3A%3A%3Aaccess%20--%20Access%20VLAN20%20--%3E%20A2%0A%0A%20%20%20%20%25%25%20%E9%80%BB%E8%BE%91%E5%8A%9F%E8%83%BD%EF%BC%88%E8%99%9A%E7%BA%BF%E6%A1%86%E8%A1%A8%E7%A4%BA%EF%BC%89%0A%20%20%20%20subgraph%20%E6%A0%B8%E5%BF%83%E4%BA%A4%E6%8D%A2%E6%9C%BA%E9%80%BB%E8%BE%91%E5%8A%9F%E8%83%BD%0A%20%20%20%20%20%20%20%20classDef%20logical%20stroke-dasharray%3A5%2C5%2Cstroke%3A%23F44336%2Cfill%3A%23FFEBEE%0A%20%20%20%20%20%20%20%20V10%5BVlanif10%3Cbr%2F%3E192.168.10.1%2F24%5D%3A%3A%3Alogical%0A%20%20%20%20%20%20%20%20V20%5BVlanif20%3Cbr%2F%3E192.168.20.1%2F24%5D%3A%3A%3Alogical%0A%20%20%20%20%20%20%20%20ROUTE%5B%E9%9D%99%E6%80%81%E8%B7%AF%E7%94%B1%3Cbr%2F%3E0.0.0.0%2F0%E2%86%92192.168.1.254%5D%3A%3A%3Alogical%0A%20%20%20%20end%0A%0A%20%20%20%20%25%25%20%E6%95%B0%E6%8D%AE%E6%B5%81%E8%B7%AF%E5%BE%84%0A%20%20%20%20CORE%20-.-%3E%20V10%20%26%20V20%20%26%20ROUTE%0A%20%20%20%20PC1%20--%3E%7C1.%E8%AE%BF%E9%97%AE%E8%AF%B7%E6%B1%82%7C%20A1%20--%3E%7C2.%E5%B8%A6VLAN10%E6%A0%87%E7%AD%BE%7C%20CORE%0A%20%20%20%20CORE%20--%3E%7C3.%E8%B7%AF%E7%94%B1%E5%88%B0VLAN20%7C%20A2%20--%3E%7C4.%E8%BD%AC%E5%8F%91%7C%20CAM1%0A"})]),fallback:t(()=>s[0]||(s[0]=[a(`
          Loading...
        `)])),_:1,__:[1]})),s[8]||(s[8]=i("blockquote",null,[i("p",null,"根据Mermaid图中的拓扑结构（1台核心交换机+2台接入交换机）分别给出配置方案。以下是完全匹配您架构的详细配置清单：")],-1)),s[9]||(s[9]=a()),s[10]||(s[10]=i("hr",null,null,-1)),s[11]||(s[11]=a()),s[12]||(s[12]=i("h3",{id:"网络架构回顾",tabindex:"-1"},[i("strong",null,"网络架构回顾"),a(),i("a",{class:"header-anchor",href:"#网络架构回顾","aria-label":'Permalink to "**网络架构回顾**"'},"​")],-1)),s[13]||(s[13]=a()),(e(),h(d,null,{default:t(()=>[n(k,{id:"mermaid-20",class:"mermaid",graph:"graph%20TB%0A%20%20%20%20A1%5B%E6%8E%A5%E5%85%A5%E4%BA%A4%E6%8D%A2%E6%9C%BA1%5D%20--Trunk--%3E%20CORE%5B%E6%A0%B8%E5%BF%83%E4%BA%A4%E6%8D%A2%E6%9C%BA%5D%0A%20%20%20%20A2%5B%E6%8E%A5%E5%85%A5%E4%BA%A4%E6%8D%A2%E6%9C%BA2%5D%20--Trunk--%3E%20CORE%0A%20%20%20%20CORE%20--VLANIF30--%3E%20R%5B%E8%B7%AF%E7%94%B1%E5%99%A8%5D%0A%20%20%20%20PC1%20--VLAN10--%3E%20A1%0A%20%20%20%20CAM1%20--VLAN20--%3E%20A2%0A"})]),fallback:t(()=>s[2]||(s[2]=[a(`
          Loading...
        `)])),_:1,__:[3]})),s[14]||(s[14]=C(`<hr> <h3 id="核心交换机配置-huawei-s7700" tabindex="-1"><strong>核心交换机配置 (Huawei S7700)</strong> <a class="header-anchor" href="#核心交换机配置-huawei-s7700" aria-label="Permalink to &quot;**核心交换机配置 (Huawei S7700)**&quot;">​</a></h3> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 基础配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">sysname</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> CORE-SW</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">vlan</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> batch</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 30</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 创建业务VLAN和管理VLAN</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># VLANIF三层接口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> Vlanif10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> description</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> Office_Users</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> address</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.10.1</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> dhcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> select</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> interface</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> dhcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> dns-list</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 114.114.114.114</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 223.5.5.5</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> dhcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> excluded-ip-address</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.10.1</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.10.50</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 保留前50个IP</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> Vlanif20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> description</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> IP_Camera</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> address</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.20.1</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> Vlanif30</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> description</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> To_Router</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> address</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.30.1</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 连接路由器的端口（物理接口）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> access</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 30</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 连接接入交换机的Trunk端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> range</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> 0/0/1</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> to</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> 0/0/2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 30</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 放行业务VLAN和管理VLAN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> pvid</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 设置Native VLAN</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> storm-control</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> broadcast</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> min-rate</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 1000</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 广播风暴抑制</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 路由与安全</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> route-static</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 0.0.0.0</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 0</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.30.254</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 默认路由</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">acl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> PROTECT-CORE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> rule</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 5</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> deny</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> tcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> destination-port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> eq</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 445</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 阻断SMB</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> rule</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> permit</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> ip</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> Vlanif10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> traffic-filter</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> inbound</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> acl</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> name</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> PROTECT-CORE</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br></div></div><hr> <h3 id="接入交换机1配置-huawei-s5700-连接pc" tabindex="-1"><strong>接入交换机1配置 (Huawei S5700) - 连接PC</strong> <a class="header-anchor" href="#接入交换机1配置-huawei-s5700-连接pc" aria-label="Permalink to &quot;**接入交换机1配置 (Huawei S5700) - 连接PC**&quot;">​</a></h3> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">sysname</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> ACCESS-SW1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">vlan</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> batch</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 只需创建本端VLAN</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 连接PC的Access端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> access</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port-security</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port-security</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> max-mac-num</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 1</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 严格MAC绑定</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 上联核心的Trunk端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> undo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> negotiation</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> auto</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 关闭自动协商</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> speed</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 1000</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 强制千兆</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 防环路保护（接入层关键配置）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">loopback-detect</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> enable</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">loopback-detect</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> action</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> shutdown</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 检测到环路自动关闭端口</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><hr> <h3 id="接入交换机2配置-huawei-s5700-连接摄像头" tabindex="-1"><strong>接入交换机2配置 (Huawei S5700) - 连接摄像头</strong> <a class="header-anchor" href="#接入交换机2配置-huawei-s5700-连接摄像头" aria-label="Permalink to &quot;**接入交换机2配置 (Huawei S5700) - 连接摄像头**&quot;">​</a></h3> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">sysname</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> ACCESS-SW2</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">vlan</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> batch</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 20</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 摄像头专用VLAN</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 连接摄像头的端口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> access</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> default</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> storm-control</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> multicast</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> min-rate</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 500</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 组播流量抑制</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 上联核心的Trunk端口（与ACCESS-SW1对称配置）</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> link-type</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> port</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> trunk</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> allow-pass</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> undo</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> negotiation</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> auto</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> speed</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 1000</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 摄像头网络特殊优化</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> Vlanif20</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> igmp-snooping</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> enable</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 启用组播侦听</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><hr> <h3 id="路由器关键配置-huawei-ar2200" tabindex="-1"><strong>路由器关键配置 (Huawei AR2200)</strong> <a class="header-anchor" href="#路由器关键配置-huawei-ar2200" aria-label="Permalink to &quot;**路由器关键配置 (Huawei AR2200)**&quot;">​</a></h3> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 连接核心交换机的接口</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/0</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> address</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.30.254</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 24</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># NAT出口配置</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">interface</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> GigabitEthernet0/0/1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> address</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> 公网IP</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> 掩码</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;"> nat</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> outbound</span><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;">  # 启用源NAT</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">quit</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 回程路由</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> route-static</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.10.0</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 24</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.30.1</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> route-static</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.20.0</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 24</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.30.1</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><hr> <h3 id="配置对照表" tabindex="-1"><strong>配置对照表</strong> <a class="header-anchor" href="#配置对照表" aria-label="Permalink to &quot;**配置对照表**&quot;">​</a></h3> <table tabindex="0"><thead><tr><th>设备类型</th> <th>核心功能</th> <th>安全配置</th> <th>特殊优化</th></tr></thead> <tbody><tr><td><strong>核心交换机</strong></td> <td>VLAN间路由、DHCP服务</td> <td>ACL过滤高危端口</td> <td>风暴抑制</td></tr> <tr><td><strong>接入交换机1</strong></td> <td>PC接入</td> <td>端口安全(MAC绑定)</td> <td>环路检测</td></tr> <tr><td><strong>接入交换机2</strong></td> <td>摄像头接入</td> <td>组播流量控制</td> <td>IGMP Snooping</td></tr> <tr><td><strong>路由器</strong></td> <td>NAT转换、默认网关</td> <td>防火墙策略(需额外配置)</td> <td>-</td></tr></tbody></table> <hr> <h3 id="验证命令清单" tabindex="-1"><strong>验证命令清单</strong> <a class="header-anchor" href="#验证命令清单" aria-label="Permalink to &quot;**验证命令清单**&quot;">​</a></h3> <ol><li><p><strong>检查VLAN互通性</strong>：</p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 在核心交换机执行：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">ping</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> -a</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.10.1</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 192.168.20.1</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><strong>测试DHCP服务</strong>：</p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">display</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> dhcp</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> server</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> ip-in-use</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> vlan</span><span style="--shiki-light:#986801;--shiki-dark:#6CB6FF;"> 10</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li> <li><p><strong>监控端口安全</strong>：</p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#768390;--shiki-dark-font-style:inherit;"># 在接入交换机执行：</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">display</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> port-security</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li> <li><p><strong>查看路由表</strong>：</p> <div class="language-bash vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes one-light github-dark-dimmed vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#F69D50;">display</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> ip</span><span style="--shiki-light:#50A14F;--shiki-dark:#96D0FF;"> routing-table</span></span></code></pre> <div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></li></ol> <hr> <h3 id="为什么这样设计" tabindex="-1"><strong>为什么这样设计？</strong> <a class="header-anchor" href="#为什么这样设计" aria-label="Permalink to &quot;**为什么这样设计？**&quot;">​</a></h3> <ol><li><strong>核心层</strong>：集中路由/DHCP/ACL策略，避免接入层设备性能压力</li> <li><strong>接入层1</strong>：严格MAC绑定防止非法接入，适合办公PC环境</li> <li><strong>接入层2</strong>：优化组播传输，适应摄像头视频流特性</li> <li><strong>统一管理</strong>：所有设备通过VLAN1管理IP可达（需额外配置）</li></ol> <blockquote><p>💡 <strong>企业网络黄金法则</strong>：核心做路由，接入做交换，安全策略分层部署！</p></blockquote> <div class="tip custom-block"><p class="custom-block-title">运维提示</p> <ul><li>建议开启日志服务器功能：info-center loghost<br></li> <li>摄像头网络建议关闭STP：stp disable</li></ul></div> `,42)),n(y),n(b)])}const O=D(f,[["render",v]]);export{G as __pageData,O as default};
